"use strict";!function(){function t(t){return BXC_TRANSLATIONS&&t in BXC_TRANSLATIONS?BXC_TRANSLATIONS[t]:t}function e(t,e=-1){return N.loading(t,e)}function n(t,e={},n=!1){return N.ajax(t,e,n)}function i(t,e=!0){return N.activate(t,e)}function a(t){return S(t.closest(".bxc-main"))}function c(t){for(var e=t.split("?").pop().split("&"),n={},i=0;i<e.length;i++){var a=e[i].split("=");n[a[0]]=a[1]}return n}function o(t,e=-1,n=!1){if(-1===e){let e=localStorage.getItem(t);return e?JSON.parse(e):n}localStorage.setItem(t,JSON.stringify(e))}function r(t){let i=S(t.closest(".bxc-main")),a=i.find(".bxc-vat");a.e.length&&(e(a),n("vat",{amount:i.attr("data-start-price"),country_code:S(t.options[t.selectedIndex]).attr("data-country-code"),currency:i.attr("data-currency")},t=>{a.html(t[4]),a.attr("data-country",t[3]).attr("data-country-code",t[2]).attr("data-amount",t[1]).attr("data-percentage",t[5]),i.attr("data-price",t[0]),i.find(".bxc-amount-fiat-total").html(t[0]),e(a,!1)}))}function s(t){let e=o("bxc-billing"),n=a(t),i=n.find('#bxc-billing [name="country"]');if(e)for(var c in e)n.find(`#bxc-billing [name="${c}"]`).val(e[c]);else i.val(n.find(".bxc-vat").attr("data-country"));S(t).addClass("bxc-hidden"),r(i.e[0]),S("#bxc-billing").removeClass("bxc-hidden")}function l(){d.on("click",".bxc-clipboard",function(){let e=S(this).find("span"),n=e.html();navigator.clipboard.writeText(window.atob(S(this).attr("data-text"))),e.html(t("Copied")),i(this),setTimeout(()=>{i(this,!1),e.html(n)},2e3)})}var d,u,p,f,h,m,b=!1,x="",g={},v={},y="undefined",C=typeof BXC_ADMIN!==y||document.getElementsByClassName("bxc-admin").length,T=document.getElementsByTagName("script"),_=typeof BXC_LANGUAGE!==y&&BXC_LANGUAGE,w=window.innerWidth<769,k=!1,L=!1,S=function(t){return"object"==typeof t&&"e"in t?t:new S.init("string"==typeof t?document.querySelectorAll(t):t)};S.init=function(t){this.e="SELECT"==t.tagName||void 0===t[0]&&!NodeList.prototype.isPrototypeOf(t)?[t]:t},S.ajax=function(t,e=!1,n=!1,i="POST"){let a=new XMLHttpRequest,c="";if(a.open(i,t,!0),e)if("bxc_wp_ajax"==e.action){for(var o in e)"object"==typeof e[o]&&(e[o]=JSON.stringify(e[o]));c=new URLSearchParams(e).toString(),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")}else(c=new FormData).append("data",JSON.stringify(e));a.onload=(()=>{n&&n(a.responseText)}),a.onerror=(()=>!1),a.send(c)},S.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},S.documentHeight=function(){let t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},S.init.prototype.on=function(t,e,n){for(var i=0;i<this.e.length;i++)this.e[i].addEventListener(t,function(t){for(var i=t.target;i&&i!==this;)i.matches(e)&&n.call(i,t),i=i.parentNode})},S.init.prototype.addClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.add(t);return S(this.e)},S.init.prototype.removeClass=function(t){t=t.trim().split(" ");for(var e=0;e<t.length;e++)for(var n=0;n<this.e.length;n++)this.e[n].classList.remove(t[e]);return S(this.e)},S.init.prototype.toggleClass=function(t){for(var e=0;e<this.e.length;e++)this.e[e].classList.toggle(t);return S(this.e)},S.init.prototype.setClass=function(t,e=!0){for(var n=0;n<this.e.length;n++)e?S(this.e[n]).addClass(t):S(this.e[n]).removeClass(t);return S(this.e)},S.init.prototype.hasClass=function(t){return!!this.e.length&&this.e[0].classList.contains(t)},S.init.prototype.find=function(t){0===t.indexOf(">")&&(t=":scope"+t);try{return!!this.e.length&&S(this.e[0].querySelectorAll(t))}catch(t){return console.warn(t),!1}},S.init.prototype.parent=function(){return!!this.e.length&&S(this.e[0].parentElement)},S.init.prototype.prev=function(){return S(this.e[0].previousElementSibling)},S.init.prototype.next=function(){return S(this.e[0].nextElementSibling)},S.init.prototype.attr=function(t,e=!1){if(this.e.length)return!1===e?this.e[0].getAttribute(t):(e?this.e[0].setAttribute(t,e):this.e[0].removeAttribute(t),S(this.e))},S.init.prototype.data=function(t=!1,e=!1){let n={},i=this.e[0];if(t)return S(this).attr("data-"+t,e);for(var a=0,c=i.attributes,o=c.length;a<o;a++)n[c[a].nodeName.substr(5)]=c[a].nodeValue;return n},S.init.prototype.html=function(t=!1){if(this.e.length)return!1===t?this.e[0].innerHTML:("string"==typeof t||"number"==typeof t?this.e[0].innerHTML=t:this.e[0].appendChild(t),S(this.e))},S.init.prototype.append=function(t){var e=document.createElement("template");for(e.innerHTML=t.trim();e.content.childNodes.length;)this.e[0].appendChild(e.content.firstChild);return S(this.e)},S.init.prototype.prepend=function(t){return this.e[0].innerHTML=t+this.e[0].innerHTML,S(this.e)},S.init.prototype.insert=function(t,e=!0){var n=document.createElement("template");return n.innerHTML=t.trim(),this.e[0].parentNode.insertBefore(n.content.firstChild,e?this.e[0]:null),S(this.e)},S.init.prototype.replace=function(t){return this.e[0].outerHTML=t,S(this.e)},S.init.prototype.remove=function(){for(var t=0;t<this.e.length;t++)this.e[t].remove()},S.init.prototype.is=function(t){return!(1!=this.e[0].nodeType||!this.e.length)&&(t=t.toLowerCase(),this.e[0].tagName.toLowerCase()==t||S(this).attr("type")==t)},S.init.prototype.index=function(){return[].indexOf.call(this.e[0].parentElement.children,this.e[0])},S.init.prototype.siblings=function(){return this.e[0].parentNode.querySelectorAll(":scope > *")},S.init.prototype.closest=function(t){return S(this.e[0].closest(t))},S.init.prototype.val=function(t=null){if(null!==t)for(var e=0;e<this.e.length;e++)this.e[e].value=t;return this.e.length?this.e[0].value:""},S.load=function(t=!1,e=!0,n=!1,i=!1){let a=document.createElement(e?"script":"link");t?(e?a.src=t:a.href=t,a.type=e?"text/javascript":"text/css"):a.innerHTML=i,n&&(a.onload=function(){n()}),e||(a.rel="stylesheet"),document.head.appendChild(a)},S.init.prototype.i=function(t){return S(this.e[t])},window._query=S;var N={loading:function(t,e=-1){return t=S(t),-1!==e?t.setClass("bxc-loading",!0===e):!!t.hasClass("bxc-loading")||(this.loading(t,!0),!1)},activate:function(t,e=!0){return S(t).setClass("bxc-active",e)},ajax:function(t,e=!1,n=!1){e.function=t,e.language=_,e.cloud=k,S.ajax(BXC_URL+"ajax.php",e,t=>{let e=!1,i=!1;try{e=!((i=JSON.parse(t))&&"success"in i&&i.success)}catch(t){e=!0}e?(d.find(".bxc-loading").removeClass("bxc-loading"),console.error(t),v[h]=!1):n&&n(i.response)})},cookie:function(t,e=!1,n=!1,i="get",a=!1){let c="https:"==location.protocol?"SameSite=None;Secure;":"";if("get"==i){let e=document.cookie.split(";");for(var o=0;o<e.length;o++){for(var r=e[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t)){let e=r.substring(t.length+1,r.length);return e||!1}}return!1}if("set"==i){let i=new Date;i.setTime(i.getTime()+n*(a?1:86400)*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/;"+c}else this.cookie(t)&&(document.cookie=t+"="+e+";expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;"+c)},beautifyTime:function(e,n=!1,i=!1){let a;if("0000-00-00 00:00:00"==e)return"";if(e.indexOf("-")>0){let t=e.split(/[- :]/);a=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}else{let t=e.split(/[. :]/);a=new Date(t[2],t[1]-1,t[0],t[3],t[4],t[5])}let c=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())),o=Math.round((new Date-c)/864e5)*(i?-1:1),r=c.toLocaleTimeString("en-EN",{hour:"2-digit",minute:"2-digit"});return"0"===r.charAt(0)&&(r.includes("PM")||r.includes("AM"))&&(r=r.substring(1)),o<1?`<span>${t("Today")}</span>${n?` <span>${r}</span>`:""}`:`<span>${c.toLocaleDateString()}</span>${n?` <span>${r}</span>`:""}`},search:function(t,e){let n=S(t).parent().find("i"),i=S(t).val().toLowerCase().trim();n.hasClass("bxc-loading")||(i!=x?(clearTimeout(b),b=setTimeout(()=>{x=i,e(i,n),this.loading(n)},200)):this.loading(n,!1))},searchClear:function(t,e){S(t).next().val()&&(S(t).next().val(""),e())},getURL:function(t=!1,e=!1){if(e||(e=location.href),!t){for(var n=e.split("?").pop().split("&"),i={},a=0;a<n.length;a++){var c=n[a].split("=");i[c[0]]=N.escape(c[1])}return i}return N.escape(decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(e)||[,""])[1].replace(/\+/g,"%20")||""))},escape:function(t){return t?t.replaceAll("<script","&lt;script").replaceAll("</script","&lt;/script").replaceAll("javascript:","").replaceAll("onclick=","").replaceAll("onerror=",""):t},checkout:{settings:function(t){let e=(t=S(t)).attr("data-boxcoin"),n={checkout_id:e};return e.includes("custom")?S.extend(n,S(t).data()):n},init:function(t,e,n=!1){let i=this.storageTransaction(t.checkout_id);S.ajax(BXC_URL+"init.php",{checkout:t,language:_,cloud:k},t=>{if((e=S(e)).html(t),i){if(h=e.attr("data-boxcoin"),f=e.find("> .bxc-main"),!["stripe","verifone","paypal"].includes(i.external_reference))if(i.detected)N.checkout.monitorTransaction(i.encrypted);else{let t=parseInt((Date.now()-i.storage_time)/1e3),e=BXC_SETTINGS.countdown-Math.floor(t/60),n=60-t%60;n&&e--,this.initTransaction(i.id,i.amount,i.to,i.cryptocurrency,i.external_reference,[e,n],i.custom_token,i.redirect,i.vat,i.encrypted,i.amount_extra,i.confirmations)}f.hasClass("bxc-popup")&&N.checkout.openPopup(h)}if(N.getURL("cc"))this.completeTransaction(i);else if(N.getURL("pay"))if(N.getURL("payment_status")){if(N.getURL("redirect")){let t=N.getURL("redirect").replace("payment_status=paid","");return document.location=t+(N.getURL("payment_status")?(t.includes("?")?"&":"?")+"payment_status="+N.getURL("payment_status"):"")}}else e.find(`.bxc-payment-methods [data-cryptocurrency="${N.getURL("pay")}"]`).e[0].click(),o("bxc-quote")&&N.getURL("checkout_id").includes(o("bxc-quote").id)||d.removeClass("bxc-loading");o("bxc-billing")&&s(e.find("#bxc-btn-invoice").e[0]),N.metamask.active()&&d.find("#metamask").removeClass("bxc-hidden"),n&&n(t)})},initTransaction:function(i,a,c,o,r,s=!1,l=!1,u=!1,m=!1,b=!1,x=!1,y=3){let C=f.find(".bxc-pay-cnt"),T=C.find(".bxc-pay-address"),_=N.baseCode(o.toUpperCase()),w=C.find("[data-countdown]"),k={id:i,amount:a,to:c,cryptocurrency:o,external_reference:r,custom_token:l,redirect:u,vat:m,encrypted:b,amount_extra:x,min_confirmations:y},L=N.network(o,!1),S="btc_ln"==o;f.addClass("bxc-pay-cnt-active").attr("data-active",o),T.find(".bxc-text").html(S?t("Lightning Invoice"):_+L+" "+t("address")),T.find(".bxc-title").html(c),T.find(".bxc-clipboard").attr("data-text",window.btoa(c)),(T=C.find(".bxc-pay-amount")).find(".bxc-title").html(`${a} ${_} <div>${x||""}</div>`),T.find(".bxc-clipboard").attr("data-text",window.btoa(a)),f.attr("data-transaction-id",i),T=C.find(".bxc-qrcode-text"),C.find(".bxc-qrcode").attr("src",BXC_URL+"vendor/qr.php?s=qr&d="+c+"&md=1&wq=0&fc="+BXC_SETTINGS.qr_code_color),T.find("img").attr("src",l?l.img:`${BXC_URL}media/icon-${o}.svg`),T.find("div").html(t(S?"Bitcoin Lightning Network":"Only send {T} to this address").replace("{T}",_+L)),w.html(""),p=s?[s[0],s[1],!0]:[BXC_SETTINGS.countdown,0,!0],clearInterval(g[h]),g[h]=setInterval(()=>{w.html(`${p[0]}:${p[1]<10?"0":""}${p[1]}`),p[1]--,p[1]<=0&&(p[0]<=0&&setTimeout(()=>{N.event("TransactionCancelled",k),this.cancelTransaction(!0),f.find("#bxc-expired-tx-id").html(i),f.removeClass("bxc-tx-cnt-active").addClass("bxc-failed-cnt-active")},500),p[0]<5&&p[2]&&(w.parent().addClass("bxc-countdown-expiring"),p[2]=!1),p[0]--,p[1]=59)},1e3),clearInterval(g["check-"+h]),g["check-"+h]=setInterval(()=>{v[h]||(v[h]=!0,n("check-transactions",{transaction_id:i},t=>{if(v[h]=!1,t){if("expired"==t)return;if(Array.isArray(t)&&"error"==t[0])return console.error(t[1]);S?t.confirmed&&this.monitorTransactionComplete(t,this.storageTransaction(h)):this.monitorTransaction(t)}}))},S?1e3:5e3),this.storageTransaction(h,k),N.event("TransactionStarted",k),e(C,!1),e(d,!1)},monitorTransaction:function(e){let i=this.storageTransaction(h),a="check-"+h;clearInterval(g[h]),clearInterval(g[a]),g[a]=setInterval(()=>{f&&!v[h]&&(v[h]=!0,n("check-transaction",{transaction:e},e=>{v[h]=!1,f.find(".bxc-tx-confirmations").html(e.confirmations+" / "+i.min_confirmations),e.confirmations&&f.find(".bxc-tx-status").addClass("bxc-tx-status-confirmed").html(t("Confirmed")),e.confirmed&&(e.underpayment?(f.removeClass("bxc-tx-cnt-active").addClass("bxc-underpayment-cnt-active"),clearInterval(g[a]),f.find("#bxc-underpaid-tx-id").html(i.id),this.cancelTransaction()):this.monitorTransactionComplete(e,i,a))}))},3e3),i&&(i.detected=!0,i.encrypted=e),h&&this.storageTransaction(h,i),f&&(f.addClass("bxc-tx-cnt-active"),f.find(".bxc-tx-status").removeClass("bxc-tx-status-confirmed").html(t("Pending")),f.find(".bxc-tx-confirmations").html("0 / "+i.min_confirmations))},monitorTransactionComplete:function(t,e,n=!1){t.invoice&&window.open(t.invoice),t.source&&f.find(".bxc-text").addClass("bxc-order-processing"),(t.redirect||BXC_SETTINGS.redirect)&&setTimeout(()=>{document.location.href=t.redirect?t.redirect:BXC_SETTINGS.redirect},300),this.completeTransaction(e,n)},completeTransaction:function(t,e=!1){t.redirect?setTimeout(()=>{document.location.href=encodeURI(`${t.redirect}${t.redirect.includes("?")?"&":"?"}transaction_id=${t.id}&amount=${t.amount}&address=${t.address}&cryptocurrency=${t.cryptocurrency}&external_reference=${t.external_reference}`)},300):f.removeClass("bxc-tx-cnt-active").addClass("bxc-complete-cnt-active"),clearInterval(g[e]),N.event("TransactionCompleted",t),this.cancelTransaction()},cancelTransaction:function(t=!1){!t||N.getURL("demo")||this.storageTransaction(h).prevent_cancel||n("cancel-transaction",{transaction:this.storageTransaction(h).encrypted}),clearInterval(g[h]),clearInterval(g["check-"+h]),f.removeClass("bxc-pay-cnt-active"),v[h]=!1,this.storageTransaction(h,"delete"),h=!1,f=!1},storageTransaction:function(t,e){let n=o("bxc-active-transaction",-1,{}),i=t in n;if(e)"delete"==e?delete n[t]:i&&!e.detected||(e.storage_time=Date.now(),n[t]=e);else if(i){if(n[t].detected||n[t].storage_time+6e4*BXC_SETTINGS.countdown>Date.now())return n[t];delete n[t]}return o("bxc-active-transaction",n),!1},show:function(t){d.find(`[data-boxcoin="${t}"] > div`).removeClass("bxc-hidden")},openPopup(t,e=!0){i(d.find(`[data-boxcoin="${t}"] `).find(".bxc-popup,.bxc-popup-overlay"),e)}},event:function(t,e={}){e.checkout_id=h,document.dispatchEvent(new CustomEvent("BXC"+t,{detail:e}))},baseCode:function(t){return t.replace("_tron","").replace("_TRON","").replace("_bsc","").replace("_BSC","").replace("_ln","").replace("_LN","")},network:function(e,n=!0){let i={ETH:["usdt","usdc","link","shib","bat"],TRX:["usdt_tron"],BSC:["bnb","busd","usdt_bsc"]},a="code"===n;e=e.toLowerCase();for(var c in i)if(i[c].includes(e)){if(a)return c.toLowerCase();let e=c+" "+t("network");return n?`<span class="bxc-label">${e}</span>`:" "+t("on")+" "+e}return a?e:""},lightbox:function(t,e,n=[]){let a=d.find("#bxc-lightbox"),c="";for(var o=0;o<n.length;o++)c+=`<div id="${n[o][0]}" class="bxc-btn">${n[o][1]}</div>`;a.find(".bxc-title").html(t),a.find("#bxc-lightbox-buttons").html(c),a.find("#bxc-lightbox-main").html(e).e[0].style.maxHeight=window.innerHeight-(w?130:183)+"px",i(d.find("#bxc-lightbox-loading"),!1),i(a)},lightboxClose:function(){i(d.find("#bxc-lightbox"),!1)},metamask:{accounts:!1,transactionRequest:async function(t,e,n=!1,i=!1){await ethereum.request({method:"eth_sendTransaction",params:[{from:this.accounts[0],to:n?N.web3.tokens[n][0]:e,data:n?N.web3.getData(e,t):"",value:n?"":t}]}).then(t=>{i&&i(t)})},transaction:async function(t,n,i=!1,a=!1){if(i)if("ETH"==(i=i.toUpperCase()))i=!1;else{if(typeof Web3===y)return S.load(BXC_URL+"vendor/web3.js",!0,()=>{this.transaction(t,n,i,a)});if(!N.web3.tokens)return N.web3.getTokens(()=>{this.transaction(t,n,i,a)})}"0x"!==!t.substr(0,2)&&(t=N.web3.toHex(t,i?N.web3.tokens[i][1]:18)),this.accounts?this.transactionRequest(t,n,i,a):await ethereum.request({method:"eth_requestAccounts"}).then(e=>{this.accounts=e,this.transactionRequest(t,n,i,a)}),m&&(e(m,!1),m=!1)},active:function(){return window.ethereum&&window.ethereum.isMetaMask}},web3:{tokens:!1,getData:function(t,e){return(new Web3).eth.abi.encodeFunctionCall({constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},[t,e])},toHex:function(t,e){return"0x"+(parseFloat(t)*10**e).toString(16)},getTokens:function(t=!1){n("get-tokens",{},e=>{N.web3.tokens=e,t&&t()})}}};window.BOXCoin=N,document.addEventListener("DOMContentLoaded",()=>{if(d=S(document.body),C)l();else{if(typeof BXC_URL!=y)return;N.getURL("pay")&&d.addClass("bxc-loading"),k=N.getURL("cloud"),L=d.find("#boxcoin-exchange-init");for(var p=0;p<T.length;p++)if(["boxcoin","boxcoin-js"].includes(T[p].id)){let b=T[p].src.replace("js/client.js","").replace("js/client.min.js",""),x=c(b);b.includes("?")&&(b=b.substr(0,b.indexOf("?"))),S.load(b+"css/client.css",!1),"lang"in x&&(_=x.lang),"cloud"in x&&(k=x.cloud),b.includes("?")&&(b=b.substr(0,b.indexOf("?"))),u=C?[]:d.find("[data-boxcoin]");let g={language:_,cloud:k};g.init=!0,S.ajax(b+"init.php",g,t=>{if("no-credit-balance"===t)return console.warn("Boxcoin: No credit balance.");S.load(!1,!0,!1,t),L.e.length?S.ajax(b+"init.php",{language:_,cloud:k,init_exchange:!0},t=>{S.load(b+"apps/exchange/exchange.css",!1,()=>{L.html(t),S.load(b+"apps/exchange/exchange.js")})}):u.e.forEach(t=>{N.checkout.init(N.checkout.settings(t),t)})}),l(),N.event("Init"),d.on("click",".bxc-payment-methods > div",function(){let i=a(this),c=i.parent().attr("data-boxcoin");if(i.find(".bxc-input").removeClass("bxc-error"),i.find(".bxc-error").remove(),h&&c!=h)return i.find(".bxc-body").prepend(`<div class="bxc-error bxc-text">${t("Another transaction is being processed. Complete the transaction or cancel it to start a new one.")}</div>`),void setTimeout(()=>{i.find(".bxc-error").remove()},1e4);f=i,h=c;let r=S(this).attr("data-cryptocurrency"),s=f.attr("data-external-reference"),l=f.attr("data-price"),d=f.find("#user-amount"),u=S(this).attr("data-custom-coin"),p=i.find(".bxc-vat"),m=!1;l&&-1!=l&&"0"!=l||(l=d.find("input").val())?(u&&(u={type:u,img:S(this).find("img").attr("src")}),f.find('#bxc-billing [name="name"]').val().trim()&&(m={},f.find("#bxc-billing input, #bxc-billing select").e.forEach(t=>{m[S(t).attr("name")]=S(t).val()}),o("bxc-billing",m)),p=!(!p.e.length||!p.attr("data-amount"))&&{amount:p.attr("data-amount"),percentage:p.attr("data-percentage"),country:p.attr("data-country"),country_code:p.attr("data-country-code")},f.addClass("bxc-pay-cnt-active"),e(f.find(".bxc-pay-cnt")),n("create-transaction",{amount:l,cryptocurrency_code:r,currency_code:f.attr("data-currency"),external_reference:f.attr("data-external-reference"),title:f.attr("data-title"),note:f.attr("data-note"),custom_token:u,url:document.location.href,billing:m?JSON.stringify(m):"",vat:p},e=>{if(!Array.isArray(e))return console.error(e);if("error"==e[0])return i.find(".bxc-body").prepend(`<div class="bxc-error bxc-text">${t("Something went wrong. Please try again or select another cryptocurrency.")}</div>`),N.checkout.cancelTransaction(!0);if(["stripe","verifone","paypal"].includes(r)){let t={id:e[0],amount:l,external_reference:r,redirect:f.attr("data-redirect")};N.checkout.storageTransaction(h,t),N.event("TransactionStarted",t),document.location=e[2]}else N.checkout.initTransaction(e[0],e[1],e[2],r,s,!1,u,f.attr("data-redirect"),p,e[4],l+" "+f.attr("data-currency"),e[3])})):d.addClass("bxc-error")}),d.on("click",".bxc-back",function(){f.find(".bxc-pay-top-main").addClass("bxc-hidden")}),d.on("click","#bxc-abort-cancel, #bxc-confirm-cancel",function(){f.find(".bxc-pay-top-main").removeClass("bxc-hidden")}),d.on("click","#bxc-confirm-cancel",function(){let t=N.checkout.storageTransaction(h);if(N.event("TransactionCancelled",t),N.checkout.cancelTransaction(!0),o("bxc-quote")&&t.checkout_id.includes(o("bxc-quote").id)){let e=t.redirect;d.addClass("bxc-loading"),document.location=e.includes("payment_status")?e:e+(e.includes("?")?"&":"?")+"payment_status=cancelled"}}),d.on("click",".bxc-failed-cnt .bxc-btn",function(){f.removeClass("bxc-failed-cnt-active")}),d.on("click","#metamask",function(){if(e(this))return;m=this;let t=N.checkout.storageTransaction(h);N.metamask.transaction(t.amount,t.to,t.cryptocurrency)}),d.on("click",".bxc-btn-popup,.bxc-popup-close",function(){i(S(this.closest("[data-boxcoin]")).find(".bxc-popup,.bxc-popup-overlay"),S(this).hasClass("bxc-btn-popup"))}),d.on("click",".bxc-collapse-btn",function(){S(this).parent().removeClass("bxc-collapse"),S(this).remove()}),d.on("click","#bxc-btn-invoice",function(){s(this)}),d.on("click","#bxc-btn-invoice-close",function(){let t=a(this);S(this).parent().addClass("bxc-hidden"),t.find("#bxc-btn-invoice").removeClass("bxc-hidden"),t.find("#bxc-billing").find("input, select").val(""),o("bxc-billing",!1),r(t.find('#bxc-billing [name="country"]').e[0])}),d.on("change",'#bxc-billing [name="country"]',function(){r(this)}),d.on("focusout",'#bxc-billing [name="vat"]',function(){let t=S(this).val();if(BXC_SETTINGS.vat_validation&&t.length>5&&t.charAt(0).match(/[A-Z]/i)){let i=S(this.closest(".bxc-main")),a=i.find(".bxc-vat");e(a),n("vat-validation",{vat_number:t},t=>{if(t&&t.data&&t.data.valid){let t=i.attr("data-start-price");i.find(".bxc-vat").html(""),i.attr("data-price",t),i.find(".bxc-amount-fiat-total").html(t)}else r(S('#bxc-billing [name="country"]').e[0]);e(a,!1)})}});break}}d.on("click","#bxc-lightbox-close",function(){N.lightboxClose()}),d.on("click",".bxc-select",function(){let t=S(this).find("ul"),e=t.hasClass("bxc-active");i(t,!e),C&&!e&&setTimeout(()=>{BXCAdmin.active_element=t.e[0]},300)}),d.on("click",".bxc-select li",function(){let t=S(this.closest(".bxc-select")),e=S(this).attr("data-value");var n=t.find(`[data-value="${e}"]`);i(t.find("li"),!1),t.find("p").attr("data-value",e).html(n.html()),i(n,!0),C&&(BXCAdmin.active_element=!1)})},!1)}();